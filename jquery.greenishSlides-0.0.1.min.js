/*!

Author {
	Philipp C. Adrian
	www.philippadrian.com
	www.greenish.ch
	@gre_nish
}
*/
(function(a){a.fn.greenishSlides=function(b){return a(this).each(function(){a.gS.init(a(this),b)})};a.gS=a().greenishSlides;a.extend(a.gS,{timer:{},timing:function(c,f,b){return;var e,d;f=f||"";e=new Date();a.gS.timer[c]=a.gS.timer[c]||new Date();d=e-a.gS.timer[c];a.gS.timer[c]=e;if(true&&!b){console.log(c+":"+f+"////////////////////");console.log("Time: "+d+"ms")}},defaults:{stayOpen:false,vertical:false,circle:false,transitionSpeed:400,easing:"swing",handle:".gSSlide",events:{activate:"click",deactivate:"click"},hover:{mouseover:function(){},mouseout:function(){}},keyEvents:true,swipeEvents:true,swipeThreshold:{x:30,y:10},hooks:{},limits:{},queue:false},init:function(c,e){c=a(c);var b=a.gS,d=c.css(b.css.context).children().addClass("gSSlide").css(b.css.gSSlide);b.timing("init","Start");this.opts=this.setOpts(e);if(b.opts.vertical){d.addClass("gSVertical").css(b.css.gSVertical);a.extend(b.opts,b.orientation.vertical)}else{d.addClass("gSHorizontal").css(b.css.gSHorizontal);a.extend(b.opts,b.orientation.horizontal)}a.each(this.opts.hooks,function(f,g){c.bind(f,function(j,k,h){a.proxy(g,j.target)(k,h,j)})});if(b.opts.keyEvents){a(document).bind("keydown",function(f){if(f.which==39||f.which==40){b.next(c)}else{if(f.which==37||f.which==38){b.prev(c)}}})}if(b.opts.swipeEvents&&typeof(a().swipe)=="function"){c.swipe({threshold:b.opts.swipeThreshold,swipeLeft:function(){b.next(c)},swipeRight:function(){b.prev(c)}})}if(b.defaults.hover.mouseover!=b.opts.hover.mouseover||b.defaults.hover.mouseout!=b.opts.hover.mouseout){a(b.opts.handle).live("mouseover mouseout",function(g){var f=a(this);if(b.defaults.handle!=b.opts.handle){f=a(".gSSlide").has(f)}g.type=="mouseover"?a.proxy(b.opts.hover.mouseover,f)():a.proxy(b.opts.hover.mouseout,f)()})}a(b.opts.handle).bind(b.opts.events.activate,function(f){b.activate(a(this))});if(!b.opts.stayOpen){a(b.opts.handle).bind(b.opts.events.deactivate,function(f){b.deactivate(a(this))})}a(".active",c)?b.activate(a(".active",c).eq(0).removeClass("active")):b.update(c);b.timing("init","Done")},activate:function(b){var c=a.gS,d;c.timing("activate","Start",true);c.timing("activation","Start");c.defaults.handle!=c.opts.handle&&!b.hasClass("gSSlide")?b=a(".gSSlide").has(a(b)):b=a(b);if(b.hasClass("active")){return}b.siblings().removeClass("active");d=b.siblings(".deactivated");if(d.length>0){d.removeClass("deactivated");b.trigger("postDeactivate")}c.timing("activate","prehook");b.addClass("active").trigger("preActivate");c.timing("activate","activate");c.update(b.parent())},deactivate:function(b){var c=a.gS;c.defaults.handle!=c.opts.handle&&!b.hasClass("gSSlide")?b=a(".gSSlide").has(a(b)):b=a(b);if(!b.hasClass("active")){return}b.removeClass("active").addClass("deactivated").trigger("preDeactivate");c.update(b.parent())},prev:function(b,c){a.gS.step(b,-1,c)},next:function(b,c){a.gS.step(b,1,c)},step:function(d,g,c){var b=a.gS,f=a(d).children(),e;c=c||f.filter(".gSSlide.active");if(f.filter(c).length<=0){return}e=a(c).index()+(parseFloat(g)%f.length);if(e<0){b.opts.circle?e=f.length+e:e=0}else{if(e>=f.length){b.opts.circle?e=e-f.length:e=f.length-1}}b.activate(f.eq(e))},setOpts:function(b){return a.extend(true,{},this.defaults,this.opts||{},b||{})},cssFloat:function(b,c){return parseFloat(a(b).css(c).replace("px",""))||undefined},capitalize:function(b){return b.charAt(0).toUpperCase()+b.slice(1)},update:function(f,d){a.gS.timing("update","Start",true);f=a(f).stop();d=o.setOpts(d);var o=a.gS,e=a(f).children(),n=slidesLength=e.length,h=e.filter(".gSSlide.active"),q=h.index(),g=cS=a(f)[d.WoH](),s,j,m,l=[],b={},k={},r={},p=0;postAnimation,i;for(i=slidesLength-1;i>=0;i--){l[i]={obj:e.eq(i),dcss:{},css:{},active:i==q?true:false};k[i]={};l[i].css[d.WoH]=l[i].obj[d.WoH]();l[i].css["min-"+d.WoH]=o.cssFloat(l[i].obj,"min-"+d.WoH);l[i].css["max-"+d.WoH]=o.cssFloat(l[i].obj,"max-"+d.WoH);b[i]={max:l[i].css["max-"+d.WoH]||(d.limits[i]?d.limits[i].max:false)||d.limits.max||undefined,min:l[i].css["min-"+d.WoH]||(d.limits[i]?d.limits[i].min:false)||d.limits.min||0};i!=q?p+=k[i][d.WoH]=b[i].min:k[i][d.WoH]=b[i].max}o.timing("update","Got Data");if(q>=0&&(!b[q].max||b[q].max>cS-p)){k[q][d.WoH]=cS-p}else{m=Math.ceil(g/n);for(i=0;limit=b[i];i++){hitMax=(limit.max<m);if(!r[i]&&(limit.min>m||hitMax||i==q)){r[i]=true;n--;hitMax||i==q?g-=k[i][d.WoH]=limit.max:g-=limit.min;m=Math.ceil(g/n);i=-1}}for(i=0;i<slidesLength;i++){if(!r[i]){k[i][d.WoH]=m}}}o.timing("update","Got Width");s=l[q].obj.css(d.RoB)=="auto";for(i=p=0;slide=l[i];i++){p+=k[i][d.WoH];j=slide.obj.hasClass("posAct");if(true&&i==q&&!d.vertical){s?slide=o.positioning(f,slide,d.LoT,true):slide=o.positioning(f,slide,d.RoB,true);k[i]["margin-"+d.LoT]=p-k[i][d.WoH];k[i]["margin-"+d.RoB]=cS-p}else{if((i<q)||q<0||(s&&q==i)){if(!slide.obj.hasClass(d.LoT)||j){slide=o.positioning(f,slide,d.LoT)}slide.align=d.LoT;slide.css[d.LoT]=o.cssFloat(slide.obj,d.LoT);k[i][d.LoT]=p-k[i][d.WoH]}else{if(!slide.obj.hasClass(d.RoB)||j){slide=o.positioning(f,slide,d.RoB)}slide.align=d.RoB;slide.css[d.RoB]=o.cssFloat(slide.obj,d.RoB);k[i][d.RoB]=cS-p}}slide.dcss=k[i]}o.timing("update","Got Position");if(h.length<=0){h.trigger("preDeactivateAnimation",l);postAnimation=function(){var c=a(this).find(".gSSlide.deactivated");if(c.length>0){c.trigger("postDeactivate");c.removeClass("deactivated")}}}else{h.trigger("preActivateAnimation",l);postAnimation=function(){var c=a(this).find(".gSSlide.active");if(c.length>0){c.trigger("postActivate");if(!d.vertical){c.css({width:"auto"})}}}}f.data("data",{animation:l,opts:d,cS:a(f)[d.WoH]()});f.dequeue("gSpreAnimation").css({textIndent:0}).animate({textIndent:100},{duration:d.transitionSpeed,easing:d.easing,complete:postAnimation,step:o.animation}).dequeue("gSpostAnimation")},positioning:function(d,f,h,e){a.gS.timing("positioning","Start",true);var g=a.gS,b=g.opts,c=f.obj.offset(),k=h==b.LoT?b.RoB:b.LoT,l=a(d)["inner"+g.capitalize(b.WoH)](),j=f.obj["outer"+g.capitalize(b.WoH)]();if(e){css={zIndex:0,position:"relative"};css[b.WoH]="auto";css["margin-"+b.LoT]=c[b.LoT];css["margin-"+b.RoB]=l-c[b.LoT]-j;f.css["margin-"+b.LoT]=css["margin-"+b.LoT];f.css["margin-"+b.RoB]=css["margin-"+b.RoB];css[h]=0;f.obj.addClass("posAct");f.align=h}else{css={zIndex:1,position:"absolute"};css[h]=g.cssFloat(f.obj,"margin-"+h);if(!css[h]&&!g.cssFloat(f.obj,"margin-"+k)){h==b.LoT?css[h]=c[b.LoT]:css[h]=l-c[b.LoT]-j}css["margin-"+b.LoT]=0;css["margin-"+b.RoB]=0;f.css[b.WoH]=css[b.WoH]=j;f.css[h]=css[h];f.css[k]="auto";f.obj.removeClass("posAct")}css[k]="auto";f.obj.removeClass(k).addClass(h).css(css);a.gS.timing("positioning","done");return f},animation:function(c,h){a.gS.timing("step","start",true);var d=a(h.elem).dequeue("gSanimationStep").data("data"),b=d.opts,j=d.animation,m={},l,e,g,n,f=function(p,k){return Math.round(j[p].css[k]+((j[p].dcss[k]-j[p].css[k])*(c[p]||c)))},o=function(k,p){return m[k]?m[k][p]+m[k][b.WoH]:0};if(false&&b.queue){done=parseInt(c/j.length);pos=c%j.length;c={};for(g=j.length-1;g>=0;g--){if(g<=done){c[g]=1}else{if(g==done+1){c[g]=pos/100}else{c[g]=0}}}}else{c/=100}for(g=j.length-1;l=j[g];g--){m[g]={};if(!l.active){l.css[l.align]=l.css[l.align]||0;m[g][l.align]=f(g,l.align)}else{n=g}}for(g=j.length-1;l=j[g];g--){if(!l.active){l.align==b.LoT?e=g+1:e=g-1;!j[e].active?m[g][b.WoH]=m[e][l.align]-m[g][l.align]:m[g][b.WoH]=f(g,b.WoH);l.obj.css(m[g])}}if(!b.vertical){m[n]["margin-"+b.LoT]=o(n-1,b.LoT);m[n]["margin-"+b.RoB]=o(n+1,b.RoB)}else{if(j[n].align==b.LoT){m[n][b.LoT]=o(n-1,b.LoT);m[n][b.WoH]=d.cS-m[n][b.LoT]-o(n+1,b.RoB)}else{m[n][b.RoB]=o(n+1,b.RoB);m[n][b.WoH]=d.cS-m[n][b.RoB]-o(n-1,b.LoT)}}j[n].obj.css(m[n]);a.gS.timing("step","end",true)},orientation:{horizontal:{WoH:"width",LoT:"left",RoB:"right"},vertical:{WoH:"height",LoT:"top",RoB:"bottom"}},css:{context:{overflow:"hidden",zoom:1},gSSlide:{position:"absolute",margin:0,display:"block",overflow:"hidden",textIndent:0},gSHorizontal:{marginBottom:"-100%",height:"100%",top:0},gSVertical:{marginRight:"-100%",width:"100%",left:0}}})})(jQuery);